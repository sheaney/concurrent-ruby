<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Class: Concurrent::TimerTask
  
    &mdash; Concurrent
  
</title>

  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../';
  framesUrl = "../frames.html#!Concurrent/TimerTask.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Concurrent.html" title="Concurrent (module)">Concurrent</a></span></span>
     &raquo; 
    <span class="title">TimerTask</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Class: Concurrent::TimerTask
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Concurrent::TimerTask</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
      <dt class="r2">Includes:</dt>
      <dd class="r2"><span class='object_link'><a href="Dereferenceable.html" title="Concurrent::Dereferenceable (module)">Dereferenceable</a></span>, <span class='object_link'><a href="Observable.html" title="Concurrent::Observable (module)">Observable</a></span>, <span class='object_link'><a href="RubyExecutor.html" title="Concurrent::RubyExecutor (module)">RubyExecutor</a></span></dd>
      
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/concurrent/timer_task.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A very common currency pattern is to run a thread that performs a task at regular
intervals. The thread that performs the task sleeps for the given interval then
wakes up and performs the task. Lather, rinse, repeat... This pattern causes two
problems. First, it is difficult to test the business logic of the task because the
task itself is tightly coupled with the concurrency logic. Second, an exception in
raised while performing the task can cause the entire thread to abend. In a
long-running application where the task thread is intended to run for days/weeks/years
a crashed task thread can pose a significant problem. <code>TimerTask</code> alleviates both problems.</p>

<p>When a <code>TimerTask</code> is launched it starts a thread for monitoring the execution interval.
The <code>TimerTask</code> thread does not perform the task, however. Instead, the TimerTask
launches the task on a separate thread. Should the task experience an unrecoverable
crash only the task thread will crash. This makes the <code>TimerTask</code> very fault tolerant
Additionally, the <code>TimerTask</code> thread can respond to the success or failure of the task,
performing logging or ancillary operations. <code>TimerTask</code> can also be configured with a
timeout value allowing it to kill a task that runs too long.</p>

<p>One other advantage of <code>TimerTask</code> is it forces the business logic to be completely decoupled
from the concurrency logic. The business logic can be tested separately then passed to the
<code>TimerTask</code> for scheduling and running.</p>

<p>In some cases it may be necessary for a <code>TimerTask</code> to affect its own execution cycle.
To facilitate this a reference to the task object is passed into the block as a block
argument every time the task is executed.</p>

<p>The <code>TimerTask</code> class includes the <code>Dereferenceable</code> mixin module so the result of
the last execution is always available via the <code>#value</code> method. Derefencing options
can be passed to the <code>TimerTask</code> during construction or at any later time using the
<code>#set_deref_options</code> method.</p>

<p><code>TimerTask</code> supports notification through the Ruby standard library
<a href="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html" target="_parent" title="Observable">Observable</a>
module. On execution the <code>TimerTask</code> will notify the observers
with threes arguments: time of execution, the result of the block (or nil on failure),
and any raised exceptions (or nil on success). If the timeout interval is exceeded
the observer will receive a <code>Concurrent::TimeoutError</code> object as the third argument.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Basic usage</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lbrace'>{</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>

<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span> <span class='comment'>#=&gt; 60 (default)
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_timeout_interval'>timeout_interval</span>   <span class='comment'>#=&gt; 30 (default)
</span>
<span class='comment'># wait 60 seconds...
</span><span class='comment'>#=&gt; &#39;Boom!&#39;
</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span> <span class='comment'>#=&gt; true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Configuring <code>:execution_interval</code> and <code>:timeout_interval</code></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>5</span><span class='comma'>,</span> <span class='label'>timeout_interval:</span> <span class='int'>5</span><span class='rparen'>)</span> <span class='kw'>do</span>
       <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span>
     <span class='kw'>end</span>

<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span> <span class='comment'>#=&gt; 5
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_timeout_interval'>timeout_interval</span>   <span class='comment'>#=&gt; 5</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Immediate execution with <code>:run_now</code></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>run_now:</span> <span class='kw'>true</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom!</span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>

<span class='comment'>#=&gt; &#39;Boom!&#39;</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Last <code>#value</code> and <code>Dereferenceable</code> mixin</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span>
  <span class='label'>dup_on_deref:</span> <span class='kw'>true</span><span class='comma'>,</span>
  <span class='label'>execution_interval:</span> <span class='int'>5</span>
<span class='rparen'>)</span><span class='lbrace'>{</span> <span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span> <span class='rbrace'>}</span>

<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>
<span class='const'>Time</span><span class='period'>.</span><span class='id identifier rubyid_now'>now</span>   <span class='comment'>#=&gt; 2013-11-07 18:06:50 -0500
</span><span class='id identifier rubyid_sleep'>sleep</span><span class='lparen'>(</span><span class='int'>10</span><span class='rparen'>)</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_value'>value</span> <span class='comment'>#=&gt; 2013-11-07 18:06:55 -0500</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Controlling execution from within the block</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_timer_task'>timer_task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>1</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_task'>task</span><span class='op'>|</span>
  <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span><span class='period'>.</span><span class='id identifier rubyid_times'>times</span><span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Boom! </span><span class='tstring_end'>&#39;</span></span> <span class='rbrace'>}</span>
  <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span> <span class='op'>+=</span> <span class='int'>1</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span> <span class='op'>&gt;</span> <span class='int'>5</span>
    <span class='id identifier rubyid_puts'>puts</span> <span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>Stopping...</span><span class='tstring_end'>&#39;</span></span>
    <span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_timer_task'>timer_task</span><span class='period'>.</span><span class='id identifier rubyid_run'>run</span> <span class='comment'># blocking call - this task will stop itself
</span><span class='comment'>#=&gt; Boom!
</span><span class='comment'>#=&gt; Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Boom! Boom! Boom! Boom! Boom!
</span><span class='comment'>#=&gt; Stopping...</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Observation</p>
</div></p>
      
      <pre class="example code"><code><span class='kw'>class</span> <span class='const'>TaskObserver</span>
  <span class='kw'>def</span> <span class='id identifier rubyid_update'>update</span><span class='lparen'>(</span><span class='id identifier rubyid_time'>time</span><span class='comma'>,</span> <span class='id identifier rubyid_result'>result</span><span class='comma'>,</span> <span class='id identifier rubyid_ex'>ex</span><span class='rparen'>)</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_result'>result</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>) Execution successfully returned </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_result'>result</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_ex'>ex</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimeoutError</span><span class='rparen'>)</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>) Execution timed out\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>(</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_time'>time</span><span class='embexpr_end'>}</span><span class='tstring_content'>) Execution failed with error </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_ex'>ex</span><span class='embexpr_end'>}</span><span class='tstring_content'>\n</span><span class='tstring_end'>&quot;</span></span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>timeout_interval:</span> <span class='int'>1</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='int'>42</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_add_observer'>add_observer</span><span class='lparen'>(</span><span class='const'>TaskObserver</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>

<span class='comment'>#=&gt; (2013-10-13 19:08:58 -0400) Execution successfully returned 42
</span><span class='comment'>#=&gt; (2013-10-13 19:08:59 -0400) Execution successfully returned 42
</span><span class='comment'>#=&gt; (2013-10-13 19:09:00 -0400) Execution successfully returned 42
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>1</span><span class='comma'>,</span> <span class='label'>timeout_interval:</span> <span class='int'>1</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_sleep'>sleep</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_add_observer'>add_observer</span><span class='lparen'>(</span><span class='const'>TaskObserver</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>

<span class='comment'>#=&gt; (2013-10-13 19:07:25 -0400) Execution timed out
</span><span class='comment'>#=&gt; (2013-10-13 19:07:27 -0400) Execution timed out
</span><span class='comment'>#=&gt; (2013-10-13 19:07:29 -0400) Execution timed out
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span>

<span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>1</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_raise'>raise</span> <span class='const'>StandardError</span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_add_observer'>add_observer</span><span class='lparen'>(</span><span class='const'>TaskObserver</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='rparen'>)</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span>

<span class='comment'>#=&gt; (2013-10-13 19:09:37 -0400) Execution failed with error StandardError
</span><span class='comment'>#=&gt; (2013-10-13 19:09:38 -0400) Execution failed with error StandardError
</span><span class='comment'>#=&gt; (2013-10-13 19:09:39 -0400) Execution failed with error StandardError
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_stop'>stop</span></code></pre>
    
  </div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><a href="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html" target="_parent" title="http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html">http://ruby-doc.org/stdlib-2.0/libdoc/observer/rdoc/Observable.html</a></li>
    
      <li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html" target="_parent" title="http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html">http://docs.oracle.com/javase/7/docs/api/java/util/TimerTask.html</a></li>
    
  </ul>

</div>
  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="EXECUTION_INTERVAL-constant" class="">EXECUTION_INTERVAL =
          <div class="docstring">
  <div class="discussion">
    <p>Default <code>:execution_interval</code> in seconds.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>60</span></pre></dd>
      
        <dt id="TIMEOUT_INTERVAL-constant" class="">TIMEOUT_INTERVAL =
          <div class="docstring">
  <div class="discussion">
    <p>Default <code>:timeout_interval</code> in seconds.</p>


  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class='int'>30</span></pre></dd>
      
    </dl>
  




  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#execution_interval-instance_method" title="#execution_interval (instance method)">- (Fixnum) <strong>execution_interval</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Number of seconds after the task completes before the task is performed again.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#mutex-instance_method" title="#mutex (instance method)">- (Object) <strong>mutex</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#mutex-instance_method" title="Concurrent::RubyExecutor#mutex (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute mutex.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#observers-instance_method" title="#observers (instance method)">- (Object) <strong>observers</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#observers-instance_method" title="Concurrent::Observable#observers (method)">Observable</a></span>
    </span>
  
  
  
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute observers.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#stop_event-instance_method" title="#stop_event (instance method)">- (Object) <strong>stop_event</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#stop_event-instance_method" title="Concurrent::RubyExecutor#stop_event (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute stop_event.</p>
</div></span>
  
</li>

    
      <li class="protected ">
  <span class="summary_signature">
    
      <a href="#stopped_event-instance_method" title="#stopped_event (instance method)">- (Object) <strong>stopped_event</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#stopped_event-instance_method" title="Concurrent::RubyExecutor#stopped_event (method)">RubyExecutor</a></span>
    </span>
  
  
  
    
      <span class="note title readonly">readonly</span>
    
    
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the value of attribute stopped_event.</p>
</div></span>
  
</li>

    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#timeout_interval-instance_method" title="#timeout_interval (instance method)">- (Fixnum) <strong>timeout_interval</strong> </a>
    

    
  </span>
  
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Number of seconds the task can run before it is considered to have failed.</p>
</div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-class_method" title="execute (class method)">+ (TimerTask) <strong>execute</strong>(opts = {}) {|task| ... }</a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create and execute a new <code>TimerTask</code>.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#run%21-class_method" title="run! (class method)">+ (Object) <strong>run!</strong>(*args, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_observer-instance_method" title="#add_observer (instance method)">- (Object) <strong>add_observer</strong>(*args, &amp;block) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#add_observer-instance_method" title="Concurrent::Observable#add_observer (method)">Observable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The added observer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#can_overflow%3F-instance_method" title="#can_overflow? (instance method)">- (Boolean) <strong>can_overflow?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Executor.html#can_overflow%3F-instance_method" title="Concurrent::Executor#can_overflow? (method)">Executor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#cancel-instance_method" title="#cancel (instance method)">- (Object) <strong>cancel</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#count_observers-instance_method" title="#count_observers (instance method)">- (Integer) <strong>count_observers</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#count_observers-instance_method" title="Concurrent::Observable#count_observers (method)">Observable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The observers count.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_observer-instance_method" title="#delete_observer (instance method)">- (Object) <strong>delete_observer</strong>(*args) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#delete_observer-instance_method" title="Concurrent::Observable#delete_observer (method)">Observable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The deleted observer.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete_observers-instance_method" title="#delete_observers (instance method)">- (Observable) <strong>delete_observers</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#delete_observers-instance_method" title="Concurrent::Observable#delete_observers (method)">Observable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Self.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute-instance_method" title="#execute (instance method)">- (TimerTask) <strong>execute</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Execute a previously created <code>TimerTask</code>.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#init_executor-instance_method" title="#init_executor (instance method)">- (Object) <strong>init_executor</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#init_executor-instance_method" title="Concurrent::RubyExecutor#init_executor (method)">RubyExecutor</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#init_mutex-instance_method" title="#init_mutex (instance method)">- (Object) <strong>init_mutex</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#init_mutex-instance_method" title="Concurrent::Dereferenceable#init_mutex (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Initializes the internal <code>Mutex</code>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (TimerTask) <strong>initialize</strong>(opts = {}) {|task| ... }</a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Create a new TimerTask with the given task and configuration.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#kill-instance_method" title="#kill (instance method)">- (Object) <strong>kill</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#kill-instance_method" title="Concurrent::RubyExecutor#kill (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Begin an immediate shutdown.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#log-instance_method" title="#log (instance method)">- (Object) <strong>log</strong>(level, progname, message = nil, &amp;block) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Logging.html#log-instance_method" title="Concurrent::Logging#log (method)">Logging</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Logs through <span class='object_link'><a href="Configuration.html#logger-instance_method" title="Concurrent::Configuration#logger (method)">Configuration#logger</a></span>, it can be overridden by setting @logger.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong> </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#run%21-instance_method" title="#run! (instance method)">- (Object) <strong>run!</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#running%3F-instance_method" title="#running? (instance method)">- (Boolean) <strong>running?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor running?.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#set_deref_options-instance_method" title="#set_deref_options (instance method)">- (Object) <strong>set_deref_options</strong>(opts = {}) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#set_deref_options-instance_method" title="Concurrent::Dereferenceable#set_deref_options (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the options which define the operations #value performs before returning data to the caller (dereferencing).</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown-instance_method" title="#shutdown (instance method)">- (Object) <strong>shutdown</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shutdown-instance_method" title="Concurrent::RubyExecutor#shutdown (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Begin an orderly shutdown.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shutdown%3F-instance_method" title="#shutdown? (instance method)">- (Boolean) <strong>shutdown?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutor#shutdown? (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor shutdown?.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#shuttingdown%3F-instance_method" title="#shuttingdown? (instance method)">- (Boolean) <strong>shuttingdown?</strong> </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutor#shuttingdown? (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Is the executor shuttingdown?.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#stop-instance_method" title="#stop (instance method)">- (Object) <strong>stop</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#terminate-instance_method" title="#terminate (instance method)">- (Object) <strong>terminate</strong>(*args) </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value-instance_method" title="#value (instance method)">- (Object) <strong>value</strong> </a>
    

    
      (also: #deref)
    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#value-instance_method" title="Concurrent::Dereferenceable#value (method)">Dereferenceable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Return the value this object represents after applying the options specified by the <code>#set_deref_options</code> method.</p>
</div></span>
  
</li>

      
        <li class="protected ">
  <span class="summary_signature">
    
      <a href="#value%3D-instance_method" title="#value= (instance method)">- (Object) <strong>value=</strong>(val) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Dereferenceable.html#value%3D-instance_method" title="Concurrent::Dereferenceable#value= (method)">Dereferenceable</a></span>
    </span>
  
  
  
  <span class="note title protected">protected</span>
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Set the internal value of this object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#wait_for_termination-instance_method" title="#wait_for_termination (instance method)">- (Boolean) <strong>wait_for_termination</strong>(timeout = nil) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="RubyExecutor.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutor#wait_for_termination (method)">RubyExecutor</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Block until executor shutdown is complete or until <code>timeout</code> seconds have passed.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#with_observer-instance_method" title="#with_observer (instance method)">- (Observable) <strong>with_observer</strong>(*args, &amp;block) </a>
    

    
  </span>
  
    <span class="note title not_defined_here">
      included
      from <span class='object_link'><a href="Observable.html#with_observer-instance_method" title="Concurrent::Observable#with_observer (method)">Observable</a></span>
    </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>as #add_observer but it can be used for chaining.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  
  
  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::TimerTask (class)">TimerTask</a></span></tt>) <strong>initialize</strong>(opts = {}) {|task| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Calls Concurrent::Dereferenceable#  set_deref_options passing <code>opts</code>.
All options supported by Concurrent::Dereferenceable can be set
during object initialization.</p>
</div>
  </div>

<p>Create a new TimerTask with the given task and configuration.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options defining task execution.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:execution_interval</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>number of seconds between
task executions (default: EXECUTION_INTERVAL)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:timeout_interval</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>number of seconds a task can
run before it is considered to have failed (default: TIMEOUT_INTERVAL)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:run_now</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Whether to run the task immediately
upon instantiation or to wait until the first #  execution_interval
has passed (default: false)</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>to the block after :execution_interval seconds have passed since
the last yield</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>task</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>a reference to the <code>TimerTask</code> instance so that the
block can control its own lifecycle. Necessary since <code>self</code> will
refer to the execution context of the block rather than the running
<code>TimerTask</code>.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>ArgumentError when no block is given.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>set_deref_options</li>
    
  </ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


186
187
188
189
190
191
192
193
194
195
196
197
198
199</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 186</span>

<span class='kw'>def</span> <span class='id identifier rubyid_initialize'>initialize</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>ArgumentError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>no block given</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='id identifier rubyid_init_executor'>init_executor</span>
  <span class='id identifier rubyid_set_deref_options'>set_deref_options</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='rparen'>)</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_execution_interval'>execution_interval</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:execution</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:execution_interval</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>EXECUTION_INTERVAL</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_timeout_interval'>timeout_interval</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:timeout</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:timeout_interval</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='const'>TIMEOUT_INTERVAL</span>
  <span class='ivar'>@run_now</span> <span class='op'>=</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:now</span><span class='rbracket'>]</span> <span class='op'>||</span> <span class='id identifier rubyid_opts'>opts</span><span class='lbracket'>[</span><span class='symbol'>:run_now</span><span class='rbracket'>]</span>
  <span class='ivar'>@executor</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>SafeTaskExecutor</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
  <span class='ivar'>@running</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>AtomicBoolean</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='kw'>false</span><span class='rparen'>)</span>

  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_observers'>observers</span> <span class='op'>=</span> <span class='const'>CopyOnNotifyObserverSet</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="execution_interval=-instance_method"></span>
      <div class="method_details first">
  <h3 class="signature first" id="execution_interval-instance_method">
  
    - (<tt>Fixnum</tt>) <strong>execution_interval</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Number of seconds after the task completes before the
task is performed again.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Number of seconds after the task completes before the
task is performed again.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


249
250
251
252
253
254</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 249</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execution_interval'>execution_interval</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_lock'>lock</span>
  <span class='ivar'>@execution_interval</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="mutex-instance_method">
  
    - (<tt>Object</tt>) <strong>mutex</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#mutex-instance_method" title="Concurrent::RubyExecutor#mutex (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute mutex</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id="observers=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="observers-instance_method">
  
    - (<tt>Object</tt>) <strong>observers</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#observers-instance_method" title="Concurrent::Observable#observers (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute observers</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="stop_event-instance_method">
  
    - (<tt>Object</tt>) <strong>stop_event</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#stop_event-instance_method" title="Concurrent::RubyExecutor#stop_event (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute stop_event</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id=""></span>
      <div class="method_details ">
  <h3 class="signature " id="stopped_event-instance_method">
  
    - (<tt>Object</tt>) <strong>stopped_event</strong>  <span class="extras">(readonly, protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#stopped_event-instance_method" title="Concurrent::RubyExecutor#stopped_event (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute stopped_event</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      
      <span id="timeout_interval=-instance_method"></span>
      <div class="method_details ">
  <h3 class="signature " id="timeout_interval-instance_method">
  
    - (<tt>Fixnum</tt>) <strong>timeout_interval</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns Number of seconds the task can run before it is
considered to have failed.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Fixnum</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Number of seconds the task can run before it is
considered to have failed.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


275
276
277
278
279
280</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 275</span>

<span class='kw'>def</span> <span class='id identifier rubyid_timeout_interval'>timeout_interval</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_lock'>lock</span>
  <span class='ivar'>@timeout_interval</span>
<span class='kw'>ensure</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_unlock'>unlock</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="execute-class_method">
  
    + (<tt><span class='object_link'><a href="" title="Concurrent::TimerTask (class)">TimerTask</a></span></tt>) <strong>execute</strong>(opts = {}) {|task| ... }
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Calls Concurrent::Dereferenceable#  set_deref_options passing <code>opts</code>.
All options supported by Concurrent::Dereferenceable can be set
during object initialization.</p>
</div>
  </div>

<p>Create and execute a new <code>TimerTask</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>10</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span> <span class='comment'>#=&gt; true</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options defining task execution.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:execution_interval</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>number of seconds between
task executions (default: EXECUTION_INTERVAL)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:timeout_interval</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>number of seconds a task can
run before it is considered to have failed (default: TIMEOUT_INTERVAL)</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:run_now</span>
          <span class="type">(<tt>Boolean</tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>Whether to run the task immediately
upon instantiation or to wait until the first #  execution_interval
has passed (default: false)</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>to the block after :execution_interval seconds have passed since
the last yield</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>task</span>
      
      
        <span class='type'></span>
      
      
      
        &mdash;
        <div class='inline'><p>a reference to the <code>TimerTask</code> instance so that the
block can control its own lifecycle. Necessary since <code>self</code> will
refer to the execution context of the block rather than the running
<code>TimerTask</code>.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::TimerTask (class)">TimerTask</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the new <code>TimerTask</code></p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>ArgumentError when no block is given.</p>
</div>
      
    </li>
  
</ul>

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li>set_deref_options</li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.6.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


242
243
244</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 242</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='rbrace'>}</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span>
  <span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='id identifier rubyid_opts'>opts</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_task'>task</span><span class='rparen'>)</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run!-class_method">
  
    + (<tt>Object</tt>) <strong>run!</strong>(*args, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


311
312
313
314</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 311</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_run!'>run!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_warn'>warn</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>[DEPRECATED] `run!` is deprecated, please use `execute` instead.</span><span class='tstring_end'>&quot;</span></span>
  <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Runnable</span><span class='op'>::</span><span class='const'>Context</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="add_observer-instance_method">
  
    - (<tt>Object</tt>) <strong>add_observer</strong>(*args, &amp;block) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#add_observer-instance_method" title="Concurrent::Observable#add_observer (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the added observer</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the added observer</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="can_overflow?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>can_overflow?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Executor.html#can_overflow%3F-instance_method" title="Concurrent::Executor#can_overflow? (method)">Executor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="cancel-instance_method">
  
    - (<tt>Object</tt>) <strong>cancel</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


305</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 305</span>

<span class='kw'>def</span> <span class='id identifier rubyid_cancel'>cancel</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='id identifier rubyid_deprecated'>deprecated</span><span class='lparen'>(</span><span class='symbol'>:cancel</span><span class='comma'>,</span> <span class='symbol'>:shutdown</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="count_observers-instance_method">
  
    - (<tt>Integer</tt>) <strong>count_observers</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#count_observers-instance_method" title="Concurrent::Observable#count_observers (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the observers count</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the observers count</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_observer-instance_method">
  
    - (<tt>Object</tt>) <strong>delete_observer</strong>(*args) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#delete_observer-instance_method" title="Concurrent::Observable#delete_observer (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the deleted observer</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the deleted observer</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete_observers-instance_method">
  
    - (<tt><span class='object_link'><a href="Observable.html" title="Concurrent::Observable (module)">Observable</a></span></tt>) <strong>delete_observers</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#delete_observers-instance_method" title="Concurrent::Observable#delete_observers (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns self</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Observable.html" title="Concurrent::Observable (module)">Observable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>self</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute-instance_method">
  
    - (<tt><span class='object_link'><a href="" title="Concurrent::TimerTask (class)">TimerTask</a></span></tt>) <strong>execute</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Execute a previously created <code>TimerTask</code>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Instance and execute in separate steps</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>10</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span> <span class='comment'>#=&gt; false
</span><span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span> <span class='comment'>#=&gt; true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Instance and execute in one line</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_task'>task</span> <span class='op'>=</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>TimerTask</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='label'>execution_interval:</span> <span class='int'>10</span><span class='rparen'>)</span><span class='lbrace'>{</span> <span class='id identifier rubyid_print'>print</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Hello World\n</span><span class='tstring_end'>&quot;</span></span> <span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
<span class='id identifier rubyid_task'>task</span><span class='period'>.</span><span class='id identifier rubyid_running?'>running?</span> <span class='comment'>#=&gt; true</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Concurrent::TimerTask (class)">TimerTask</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a reference to <code>self</code></p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>0.6.0</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226
227
228
229
230
231</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 223</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute'>execute</span>
  <span class='id identifier rubyid_mutex'>mutex</span><span class='period'>.</span><span class='id identifier rubyid_synchronize'>synchronize</span> <span class='kw'>do</span>
    <span class='kw'>if</span> <span class='ivar'>@running</span><span class='period'>.</span><span class='id identifier rubyid_false?'>false?</span>
      <span class='ivar'>@running</span><span class='period'>.</span><span class='id identifier rubyid_make_true'>make_true</span>
      <span class='id identifier rubyid_schedule_next_task'>schedule_next_task</span><span class='lparen'>(</span><span class='ivar'>@run_now</span> <span class='op'>?</span> <span class='int'>0</span> <span class='op'>:</span> <span class='ivar'>@execution_interval</span><span class='rparen'>)</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>self</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_executor-instance_method">
  
    - (<tt>Object</tt>) <strong>init_executor</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#init_executor-instance_method" title="Concurrent::RubyExecutor#init_executor (method)">RubyExecutor</a></span>
    </span>
  
</h3>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="init_mutex-instance_method">
  
    - (<tt>Object</tt>) <strong>init_mutex</strong>  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#init_mutex-instance_method" title="Concurrent::Dereferenceable#init_mutex (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>This method <em>must</em> be called from within the constructor of the including class.</p>
</div>
  </div>

<p>Initializes the internal <code>Mutex</code>.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="Dereferenceable.html#mutex-instance_method" title="Concurrent::Dereferenceable#mutex (method)">#mutex</a></span></li>
    
  </ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="kill-instance_method">
  
    - (<tt>Object</tt>) <strong>kill</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#kill-instance_method" title="Concurrent::RubyExecutor#kill (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Begin an immediate shutdown. In-progress tasks will be allowed to
complete but enqueued tasks will be dismissed and no new tasks
will be accepted. Has no additional effect if the thread pool is
not running.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="log-instance_method">
  
    - (<tt>Object</tt>) <strong>log</strong>(level, progname, message = nil, &amp;block) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Logging.html#log-instance_method" title="Concurrent::Logging#log (method)">Logging</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Logs through <span class='object_link'><a href="Configuration.html#logger-instance_method" title="Concurrent::Configuration#logger (method)">Configuration#logger</a></span>, it can be overridden by setting @logger</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>level</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>one of Logger::Severity constants</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>progname</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>e.g. a path of an Actor</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>message</span>
      
      
        <span class='type'>(<tt>String</tt>, <tt>nil</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>when nil block is used to generate the message</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>a message</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run-instance_method">
  
    - (<tt>Object</tt>) <strong>run</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Raises:</p>
<ul class="raise">
  
    <li>
      
      
        <span class='type'>(<tt>Concurrent::Runnable::LifecycleError</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


317
318
319
320
321
322</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 317</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run'>run</span>
  <span class='id identifier rubyid_raise'>raise</span> <span class='const'>Concurrent</span><span class='op'>::</span><span class='const'>Runnable</span><span class='op'>::</span><span class='const'>LifecycleError</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&#39;</span><span class='tstring_content'>already running</span><span class='tstring_end'>&#39;</span></span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='ivar'>@running</span><span class='period'>.</span><span class='id identifier rubyid_true?'>true?</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span>
  <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_wait_for_termination'>wait_for_termination</span>
  <span class='kw'>true</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="run!-instance_method">
  
    - (<tt>Object</tt>) <strong>run!</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


308</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 308</span>

<span class='kw'>def</span> <span class='id identifier rubyid_run!'>run!</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='id identifier rubyid_deprecated'>deprecated</span><span class='lparen'>(</span><span class='symbol'>:run!</span><span class='comma'>,</span> <span class='symbol'>:execute</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="running?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>running?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor running?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when running, <code>false</code> when shutting down or shutdown</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


204
205
206</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 204</span>

<span class='kw'>def</span> <span class='id identifier rubyid_running?'>running?</span>
  <span class='ivar'>@running</span><span class='period'>.</span><span class='id identifier rubyid_true?'>true?</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_deref_options-instance_method">
  
    - (<tt>Object</tt>) <strong>set_deref_options</strong>(opts = {})  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#set_deref_options-instance_method" title="Concurrent::Dereferenceable#set_deref_options (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Most classes that include this module will call <code>#set_deref_options</code></p>
</div>
  </div>

<p>Set the options which define the operations #value performs before
returning data to the caller (dereferencing).</p>

<p>from within the constructor, thus allowing these options to be set at
object creation.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>opts</span>
      
      
        <span class='type'>(<tt>Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the options defining dereference behavior.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>opts</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:dup_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#dup</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:freeze_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>false</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call <code>#freeze</code> before returning the data</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:copy_on_deref</span>
          <span class="type">(<tt>String</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>nil</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>call the given <code>Proc</code> passing the internal value and
returning the value returned from the proc</p>
</div>
          
        </li>
      
    </ul>
  


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown-instance_method">
  
    - (<tt>Object</tt>) <strong>shutdown</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shutdown-instance_method" title="Concurrent::RubyExecutor#shutdown (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Begin an orderly shutdown. Tasks already in the queue will be executed,
but no new tasks will be accepted. Has no additional effect if the
thread pool is not running.</p>


  </div>
</div>
<div class="tags">
  

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shutdown?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>shutdown?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shutdown%3F-instance_method" title="Concurrent::RubyExecutor#shutdown? (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor shutdown?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when shutdown, <code>false</code> when shutting down or running</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="shuttingdown?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>shuttingdown?</strong> 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#shuttingdown%3F-instance_method" title="Concurrent::RubyExecutor#shuttingdown? (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Is the executor shuttingdown?</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> when not running and not shutdown, else <code>false</code></p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="stop-instance_method">
  
    - (<tt>Object</tt>) <strong>stop</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


302</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 302</span>

<span class='kw'>def</span> <span class='id identifier rubyid_stop'>stop</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='id identifier rubyid_deprecated'>deprecated</span><span class='lparen'>(</span><span class='symbol'>:stop</span><span class='comma'>,</span> <span class='symbol'>:shutdown</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="terminate-instance_method">
  
    - (<tt>Object</tt>) <strong>terminate</strong>(*args) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>Updated to use <code>Executor</code> instead of <code>Runnable</code></p>
</div></div>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


299</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/concurrent/timer_task.rb', line 299</span>

<span class='kw'>def</span> <span class='id identifier rubyid_terminate'>terminate</span><span class='lparen'>(</span><span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span> <span class='id identifier rubyid_deprecated'>deprecated</span><span class='lparen'>(</span><span class='symbol'>:terminate</span><span class='comma'>,</span> <span class='symbol'>:kill</span><span class='comma'>,</span> <span class='op'>*</span><span class='id identifier rubyid_args'>args</span><span class='rparen'>)</span><span class='semicolon'>;</span> <span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value-instance_method">
  
    - (<tt>Object</tt>) <strong>value</strong> 
  

  
    <span class="aliases">Also known as:
    <span class="names"><span id='deref-instance_method'>deref</span></span>
    </span>
  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#value-instance_method" title="Concurrent::Dereferenceable#value (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the value this object represents after applying the options specified
by the <code>#set_deref_options</code> method.</p>

<p>When multiple deref options are set the order of operations is strictly defined.
The order of deref operations is:
* <code>:copy_on_deref</code>
* <code>:dup_on_deref</code>
* <code>:freeze_on_deref</code></p>

<p>Because of this ordering there is no need to <code>#freeze</code> an object created by a
provided <code>:copy_on_deref</code> block. Simply set <code>:freeze_on_deref</code> to <code>true</code>.
Setting both <code>:dup_on_deref</code> to <code>true</code> and <code>:freeze_on_deref</code> to <code>true</code> is
as close to the behavior of a &quot;pure&quot; functional language (like Erlang, Clojure,
or Haskell) as we are likely to get in Ruby.</p>

<p>This method is thread-safe and synchronized with the internal <code>#mutex</code>.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the current value of the object</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value=-instance_method">
  
    - (<tt>Object</tt>) <strong>value=</strong>(val)  <span class="extras">(protected)</span>
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Dereferenceable.html#value%3D-instance_method" title="Concurrent::Dereferenceable#value= (method)">Dereferenceable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>Set the internal value of this object</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>val</span>
      
      
        <span class='type'>(<tt>Object</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the new value</p>
</div>
      
    </li>
  
</ul>


</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="wait_for_termination-instance_method">
  
    - (<tt>Boolean</tt>) <strong>wait_for_termination</strong>(timeout = nil) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="RubyExecutor.html#wait_for_termination-instance_method" title="Concurrent::RubyExecutor#wait_for_termination (method)">RubyExecutor</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'><p>Does not initiate shutdown or termination. Either <code>shutdown</code> or <code>kill</code>
must be called before this method (or on another thread).</p>
</div>
  </div>

<p>Block until executor shutdown is complete or until <code>timeout</code> seconds have
passed.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>timeout</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>the maximum number of seconds to wait for shutdown to complete</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if shutdown complete or false on <code>timeout</code></p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="with_observer-instance_method">
  
    - (<tt><span class='object_link'><a href="Observable.html" title="Concurrent::Observable (module)">Observable</a></span></tt>) <strong>with_observer</strong>(*args, &amp;block) 
  

  

  
    <span class="not_defined_here">
      Originally defined in module
        <span class='object_link'><a href="Observable.html#with_observer-instance_method" title="Concurrent::Observable#with_observer (method)">Observable</a></span>
    </span>
  
</h3><div class="docstring">
  <div class="discussion">
    <p>as #add_observer but it can be used for chaining</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Observable.html" title="Concurrent::Observable (module)">Observable</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>self</p>
</div>
      
    </li>
  
</ul>

</div>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Sat Jun 14 13:05:37 2014 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.4 (ruby-2.1.0).
</div>

<script>
//  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
//    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
//      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
//  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
//
//  ga('create', 'UA-4005004-8', 'pitr.ch');
//  ga('send', 'pageview');
</script>

  </body>
</html>